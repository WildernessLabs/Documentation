---
title: Class Emc2101
sidebar_label: Emc2101
description: Represents an EMC2101 fan controller and temperature monitor
slug: /docs/api/Meadow.Foundation/Meadow.Foundation.ICs.FanControllers/Emc2101
---
# Class Emc2101
Represents an EMC2101 fan controller and temperature monitor

###### **Assembly**: Emc2101.dll
###### [View Source](https://github.com/WildernessLabs/Meadow.Foundation.git/blob/develop/Source/Meadow.Foundation.Peripherals/ICs.FanControllers.Emc2101/Driver/Emc2101.Enums.cs#L3)
```csharp title="Declaration"
public class Emc2101 : PollingSensorBase<(Temperature? InternalTemperature, Temperature? ExternalTemperature, AngularVelocity? FanSpeed)>, IObservable<IChangeResult<(Temperature? InternalTemperature, Temperature? ExternalTemperature, AngularVelocity? FanSpeed)>>, ISamplingSensor<(Temperature? InternalTemperature, Temperature? ExternalTemperature, AngularVelocity? FanSpeed)>, ISensor<(Temperature? InternalTemperature, Temperature? ExternalTemperature, AngularVelocity? FanSpeed)>, ISensor, ISamplingSensor, II2cPeripheral
```
**Inheritance:** `System.Object` -> [Meadow.Foundation.ObservableBase&lt;UNIT&gt;](../Meadow.Foundation/ObservableBase`UNIT`) -> [Meadow.Foundation.SamplingSensorBase&lt;UNIT&gt;](../Meadow.Foundation/SamplingSensorBase`UNIT`) -> [Meadow.Foundation.PollingSensorBase&lt;UNIT&gt;](../Meadow.Foundation/PollingSensorBase`UNIT`)

**Implements:**  
`System.IObservable<Meadow.IChangeResult<System.ValueTuple<System.Nullable<Meadow.Units.Temperature>,System.Nullable<Meadow.Units.Temperature>,System.Nullable<Meadow.Units.AngularVelocity>>>>`, `Meadow.Peripherals.Sensors.ISamplingSensor<System.ValueTuple<System.Nullable<Meadow.Units.Temperature>,System.Nullable<Meadow.Units.Temperature>,System.Nullable<Meadow.Units.AngularVelocity>>>`, `Meadow.Peripherals.Sensors.ISensor<System.ValueTuple<System.Nullable<Meadow.Units.Temperature>,System.Nullable<Meadow.Units.Temperature>,System.Nullable<Meadow.Units.AngularVelocity>>>`, `Meadow.Peripherals.Sensors.ISensor`, `Meadow.Peripherals.Sensors.ISamplingSensor`, `Meadow.Hardware.II2cPeripheral`

## Properties
### ExternalTemperature
The temperature as read by the external sensor
###### [View Source](https://github.com/WildernessLabs/Meadow.Foundation.git/blob/develop/Source/Meadow.Foundation.Peripherals/ICs.FanControllers.Emc2101/Driver/Emc2101.cs#L34)
```csharp title="Declaration"
public Temperature? ExternalTemperature { get; }
```
### InternalTemperature
The temperature as read by the internal sensor
###### [View Source](https://github.com/WildernessLabs/Meadow.Foundation.git/blob/develop/Source/Meadow.Foundation.Peripherals/ICs.FanControllers.Emc2101/Driver/Emc2101.cs#L39)
```csharp title="Declaration"
public Temperature? InternalTemperature { get; }
```
### FanSpeed
The current fan speed
###### [View Source](https://github.com/WildernessLabs/Meadow.Foundation.git/blob/develop/Source/Meadow.Foundation.Peripherals/ICs.FanControllers.Emc2101/Driver/Emc2101.cs#L44)
```csharp title="Declaration"
public AngularVelocity? FanSpeed { get; }
```
### DefaultI2cAddress
The default I2C address for the peripheral
###### [View Source](https://github.com/WildernessLabs/Meadow.Foundation.git/blob/develop/Source/Meadow.Foundation.Peripherals/ICs.FanControllers.Emc2101/Driver/Emc2101.cs#L49)
```csharp title="Declaration"
public byte DefaultI2cAddress { get; }
```
### MinimumFanSpeed
Get/Set the minimum fan speed for the currently connected fan
###### [View Source](https://github.com/WildernessLabs/Meadow.Foundation.git/blob/develop/Source/Meadow.Foundation.Peripherals/ICs.FanControllers.Emc2101/Driver/Emc2101.cs#L54)
```csharp title="Declaration"
public AngularVelocity MinimumFanSpeed { get; set; }
```
### PwmFrequencyScaler
Scales the PWM frequency against the current fan settings
Recommended to leave at max value of 0x1F
The is a 5 bit value
###### [View Source](https://github.com/WildernessLabs/Meadow.Foundation.git/blob/develop/Source/Meadow.Foundation.Peripherals/ICs.FanControllers.Emc2101/Driver/Emc2101.cs#L75)
```csharp title="Declaration"
public byte PwmFrequencyScaler { get; set; }
```
### PwmDivisor
The alternate PWM divide value that can be used instead of CLK_SEL bit function
This can set anytime but will only be used if the clock override bit is enabled
###### [View Source](https://github.com/WildernessLabs/Meadow.Foundation.git/blob/develop/Source/Meadow.Foundation.Peripherals/ICs.FanControllers.Emc2101/Driver/Emc2101.cs#L85)
```csharp title="Declaration"
public byte PwmDivisor { get; set; }
```
### FanPwmDutyCycle
Get/Set the current manually set fan PWM duty cycle (0 - 1.0)
###### [View Source](https://github.com/WildernessLabs/Meadow.Foundation.git/blob/develop/Source/Meadow.Foundation.Peripherals/ICs.FanControllers.Emc2101/Driver/Emc2101.cs#L94)
```csharp title="Declaration"
public float FanPwmDutyCycle { get; set; }
```
### Hysteresis
Get / set the amount of hysteresis applied to the temperature readings
used in the fan speed lookup table
###### [View Source](https://github.com/WildernessLabs/Meadow.Foundation.git/blob/develop/Source/Meadow.Foundation.Peripherals/ICs.FanControllers.Emc2101/Driver/Emc2101.cs#L105)
```csharp title="Declaration"
public Temperature Hysteresis { get; set; }
```
### SensorDataRate
The temperature sensor data rate
###### [View Source](https://github.com/WildernessLabs/Meadow.Foundation.git/blob/develop/Source/Meadow.Foundation.Peripherals/ICs.FanControllers.Emc2101/Driver/Emc2101.cs#L114)
```csharp title="Declaration"
public Emc2101.DataRate SensorDataRate { get; set; }
```
### DACOutputEnabled
Enable or disable outputting the fan control signal as a DC voltage
###### [View Source](https://github.com/WildernessLabs/Meadow.Foundation.git/blob/develop/Source/Meadow.Foundation.Peripherals/ICs.FanControllers.Emc2101/Driver/Emc2101.cs#L138)
```csharp title="Declaration"
public bool DACOutputEnabled { get; set; }
```
## Fields
### i2cComms
I2C Communication bus used to communicate with the peripheral
###### [View Source](https://github.com/WildernessLabs/Meadow.Foundation.git/blob/develop/Source/Meadow.Foundation.Peripherals/ICs.FanControllers.Emc2101/Driver/Emc2101.cs#L152)
```csharp title="Declaration"
protected readonly II2cCommunications i2cComms
```
## Methods
### RaiseEventsAndNotify(IChangeResult&lt;(Temperature? InternalTemperature, Temperature? ExternalTemperature, AngularVelocity? FanSpeed)&gt;)
Raise changed events for subscribers
###### [View Source](https://github.com/WildernessLabs/Meadow.Foundation.git/blob/develop/Source/Meadow.Foundation.Peripherals/ICs.FanControllers.Emc2101/Driver/Emc2101.cs#L184)
```csharp title="Declaration"
protected override void RaiseEventsAndNotify(IChangeResult<(Temperature? InternalTemperature, Temperature? ExternalTemperature, AngularVelocity? FanSpeed)> changeResult)
```

##### Parameters

| Type | Name | Description |
|:--- |:--- |:--- |
| `Meadow.IChangeResult<System.ValueTuple<System.Nullable<Meadow.Units.Temperature>,System.Nullable<Meadow.Units.Temperature>,System.Nullable<Meadow.Units.AngularVelocity>>>` | *changeResult* | The new sensor values |

### ReadSensor()
Reads data from the sensor
###### [View Source](https://github.com/WildernessLabs/Meadow.Foundation.git/blob/develop/Source/Meadow.Foundation.Peripherals/ICs.FanControllers.Emc2101/Driver/Emc2101.cs#L205)
```csharp title="Declaration"
protected override Task<(Temperature? InternalTemperature, Temperature? ExternalTemperature, AngularVelocity? FanSpeed)> ReadSensor()
```

##### Returns

`System.Threading.Tasks.Task<System.ValueTuple<System.Nullable<Meadow.Units.Temperature>,System.Nullable<Meadow.Units.Temperature>,System.Nullable<Meadow.Units.AngularVelocity>>>`: The latest sensor reading### EnableTachInput(bool)
Enable the TACH/ALERT pin as an input to read the fan speed (for 4 wire fans)
###### [View Source](https://github.com/WildernessLabs/Meadow.Foundation.git/blob/develop/Source/Meadow.Foundation.Peripherals/ICs.FanControllers.Emc2101/Driver/Emc2101.cs#L232)
```csharp title="Declaration"
public void EnableTachInput(bool enable)
```

##### Parameters

| Type | Name | Description |
|:--- |:--- |:--- |
| `System.Boolean` | *enable* | true to enable, false to disable |

### InvertFanSpeed(bool)
Invert the sensor's reading of fan speed
###### [View Source](https://github.com/WildernessLabs/Meadow.Foundation.git/blob/develop/Source/Meadow.Foundation.Peripherals/ICs.FanControllers.Emc2101/Driver/Emc2101.cs#L245)
```csharp title="Declaration"
public void InvertFanSpeed(bool invert)
```

##### Parameters

| Type | Name | Description |
|:--- |:--- |:--- |
| `System.Boolean` | *invert* | true to invert, false for normal |

### ConfigurePwmClock(bool, bool)
Configure the PWM clock
###### [View Source](https://github.com/WildernessLabs/Meadow.Foundation.git/blob/develop/Source/Meadow.Foundation.Peripherals/ICs.FanControllers.Emc2101/Driver/Emc2101.cs#L259)
```csharp title="Declaration"
public void ConfigurePwmClock(bool clockSelect, bool clockOverride)
```

##### Parameters

| Type | Name | Description |
|:--- |:--- |:--- |
| `System.Boolean` | *clockSelect* | true to use a 1.4kHz base PWM clock, false to use the default 360kHz PWM clock |
| `System.Boolean` | *clockOverride* | true to override the base clock and use the frequency divisor to set the PWM frequency |

### ConfigureFanSpinup(FanSpinupDrive, FanSpinupTime)
Configure the fan spinup behavior
###### [View Source](https://github.com/WildernessLabs/Meadow.Foundation.git/blob/develop/Source/Meadow.Foundation.Peripherals/ICs.FanControllers.Emc2101/Driver/Emc2101.cs#L274)
```csharp title="Declaration"
public void ConfigureFanSpinup(Emc2101.FanSpinupDrive spinupDrive, Emc2101.FanSpinupTime spinupTime)
```

##### Parameters

| Type | Name | Description |
|:--- |:--- |:--- |
| [Meadow.Foundation.ICs.FanControllers.Emc2101.FanSpinupDrive](../Meadow.Foundation.ICs.FanControllers/Emc2101.FanSpinupDrive) | *spinupDrive* | The drive or percent to spin up to |
| [Meadow.Foundation.ICs.FanControllers.Emc2101.FanSpinupTime](../Meadow.Foundation.ICs.FanControllers/Emc2101.FanSpinupTime) | *spinupTime* | The time taken to spin up to the drive speed |

### SetLookupTable(LutIndex, Temperature, float)
Set a temperature and fan duty cycle to the lookup table
###### [View Source](https://github.com/WildernessLabs/Meadow.Foundation.git/blob/develop/Source/Meadow.Foundation.Peripherals/ICs.FanControllers.Emc2101/Driver/Emc2101.cs#L291)
```csharp title="Declaration"
public void SetLookupTable(Emc2101.LutIndex index, Temperature temperatureThreshhold, float pwmDutyCycle)
```

##### Parameters

| Type | Name | Description |
|:--- |:--- |:--- |
| [Meadow.Foundation.ICs.FanControllers.Emc2101.LutIndex](../Meadow.Foundation.ICs.FanControllers/Emc2101.LutIndex) | *index* | The LUT index to set |
| `Meadow.Units.Temperature` | *temperatureThreshhold* | the temperature threshold |
| `System.Single` | *pwmDutyCycle* | the fan PWM duty cycle |

## Events
### InternalTemperatureUpdated
Internal Temperature changed event
###### [View Source](https://github.com/WildernessLabs/Meadow.Foundation.git/blob/develop/Source/Meadow.Foundation.Peripherals/ICs.FanControllers.Emc2101/Driver/Emc2101.cs#L19)
```csharp title="Declaration"
public event EventHandler<IChangeResult<Temperature>> InternalTemperatureUpdated
```
##### Event Type
`System.EventHandler<Meadow.IChangeResult<Meadow.Units.Temperature>>`
### ExternalTemperatureUpdated
External Temperature changed event
###### [View Source](https://github.com/WildernessLabs/Meadow.Foundation.git/blob/develop/Source/Meadow.Foundation.Peripherals/ICs.FanControllers.Emc2101/Driver/Emc2101.cs#L24)
```csharp title="Declaration"
public event EventHandler<IChangeResult<Temperature>> ExternalTemperatureUpdated
```
##### Event Type
`System.EventHandler<Meadow.IChangeResult<Meadow.Units.Temperature>>`
### FanSpeedUpdated
Fan Speed changed event
###### [View Source](https://github.com/WildernessLabs/Meadow.Foundation.git/blob/develop/Source/Meadow.Foundation.Peripherals/ICs.FanControllers.Emc2101/Driver/Emc2101.cs#L29)
```csharp title="Declaration"
public event EventHandler<IChangeResult<AngularVelocity>> FanSpeedUpdated
```
##### Event Type
`System.EventHandler<Meadow.IChangeResult<Meadow.Units.AngularVelocity>>`

## Implements

* `System.IObservable<Meadow.IChangeResult<System.ValueTuple<System.Nullable<Meadow.Units.Temperature>,System.Nullable<Meadow.Units.Temperature>,System.Nullable<Meadow.Units.AngularVelocity>>>>`
* `Meadow.Peripherals.Sensors.ISamplingSensor<System.ValueTuple<System.Nullable<Meadow.Units.Temperature>,System.Nullable<Meadow.Units.Temperature>,System.Nullable<Meadow.Units.AngularVelocity>>>`
* `Meadow.Peripherals.Sensors.ISensor<System.ValueTuple<System.Nullable<Meadow.Units.Temperature>,System.Nullable<Meadow.Units.Temperature>,System.Nullable<Meadow.Units.AngularVelocity>>>`
* `Meadow.Peripherals.Sensors.ISensor`
* `Meadow.Peripherals.Sensors.ISamplingSensor`
* `Meadow.Hardware.II2cPeripheral`
